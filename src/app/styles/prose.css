.prose {
	max-width: 100% !important;
}

/* #region headings */
.prose h2,
.prose h3,
.prose h4 {
	font-weight: 600;
}

.prose h2 {
	@apply text-2xl;
}

.prose h3 {
	@apply text-xl;
}

.prose .anchor {
	position: relative;
	text-decoration: none;
	font-weight: inherit;
}

.prose .anchor::after {
	content: '';
	position: absolute;
	top: 50%;
	right: -20px;
	width: 15px;
	height: 15px;
	transform: translateY(-50%);
	background: no-repeat center center / 100% auto;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' fill='none'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M8.512 3.005c.676-.46 1.531-.468 2.167-.05.144.094.298.244.71.656.412.412.562.566.657.71.417.636.408 1.49-.051 2.167-.105.155-.267.32-.694.747l-.62.619a.5.5 0 0 0 .708.707l.619-.619.043-.043c.37-.37.606-.606.771-.849.675-.994.71-2.287.06-3.278-.159-.241-.39-.472-.741-.823l-.045-.045-.044-.045c-.352-.351-.583-.582-.824-.74-.99-.65-2.284-.616-3.278.06-.243.164-.48.4-.85.77l-.042.043-.619.62a.5.5 0 1 0 .707.706l.62-.618c.426-.427.592-.59.746-.695ZM4.318 7.147a.5.5 0 0 0-.707-.707l-.619.618-.043.043c-.37.37-.606.606-.771.85-.675.993-.71 2.287-.06 3.277.159.242.39.473.741.824l.045.045.044.044c.352.351.583.583.824.741.99.65 2.284.616 3.278-.06.243-.165.48-.401.849-.771l.043-.043.619-.619a.5.5 0 1 0-.708-.707l-.618.619c-.427.427-.593.59-.747.694-.676.46-1.532.469-2.167.051-.144-.094-.298-.245-.71-.657-.412-.412-.562-.566-.657-.71-.417-.635-.408-1.49.051-2.167.105-.154.267-.32.694-.747l.619-.618Zm5.304-1.061a.5.5 0 0 0-.707-.708L5.379 8.914a.5.5 0 1 0 .707.707l3.536-3.535Z' clip-rule='evenodd'/%3E%3C/svg%3E");
	opacity: 0;
	transition: 0.25s;
}

.dark .prose .anchor::after {
	background-image: url("data:image/svg+xml,%3Csvg width='15' height='15' viewBox='0 0 15 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.51194 3.00541C9.18829 2.54594 10.0435 2.53694 10.6788 2.95419C10.8231 3.04893 10.9771 3.1993 11.389 3.61119C11.8009 4.02307 11.9513 4.17714 12.046 4.32141C12.4633 4.95675 12.4543 5.81192 11.9948 6.48827C11.8899 6.64264 11.7276 6.80811 11.3006 7.23511L10.6819 7.85383C10.4867 8.04909 10.4867 8.36567 10.6819 8.56093C10.8772 8.7562 11.1938 8.7562 11.389 8.56093L12.0077 7.94221L12.0507 7.89929C12.4203 7.52976 12.6568 7.2933 12.822 7.0502C13.4972 6.05623 13.5321 4.76252 12.8819 3.77248C12.7233 3.53102 12.4922 3.30001 12.1408 2.94871L12.0961 2.90408L12.0515 2.85942C11.7002 2.508 11.4692 2.27689 11.2277 2.11832C10.2377 1.46813 8.94398 1.50299 7.95001 2.17822C7.70691 2.34336 7.47044 2.57991 7.1009 2.94955L7.058 2.99247L6.43928 3.61119C6.24401 3.80645 6.24401 4.12303 6.43928 4.31829C6.63454 4.51355 6.95112 4.51355 7.14638 4.31829L7.7651 3.69957C8.1921 3.27257 8.35757 3.11027 8.51194 3.00541ZM4.31796 7.14672C4.51322 6.95146 4.51322 6.63487 4.31796 6.43961C4.12269 6.24435 3.80611 6.24435 3.61085 6.43961L2.99213 7.05833L2.94922 7.10124C2.57957 7.47077 2.34303 7.70724 2.17788 7.95035C1.50265 8.94432 1.4678 10.238 2.11799 11.2281C2.27656 11.4695 2.50766 11.7005 2.8591 12.0518L2.90374 12.0965L2.94837 12.1411C3.29967 12.4925 3.53068 12.7237 3.77214 12.8822C4.76219 13.5324 6.05589 13.4976 7.04986 12.8223C7.29296 12.6572 7.52943 12.4206 7.89896 12.051L7.89897 12.051L7.94188 12.0081L8.5606 11.3894C8.75586 11.1941 8.75586 10.8775 8.5606 10.6823C8.36533 10.487 8.04875 10.487 7.85349 10.6823L7.23477 11.301C6.80777 11.728 6.6423 11.8903 6.48794 11.9951C5.81158 12.4546 4.95642 12.4636 4.32107 12.0464C4.17681 11.9516 4.02274 11.8012 3.61085 11.3894C3.19896 10.9775 3.0486 10.8234 2.95385 10.6791C2.53661 10.0438 2.54561 9.18863 3.00507 8.51227C3.10993 8.35791 3.27224 8.19244 3.69924 7.76544L4.31796 7.14672ZM9.62172 6.08558C9.81698 5.89032 9.81698 5.57373 9.62172 5.37847C9.42646 5.18321 9.10988 5.18321 8.91461 5.37847L5.37908 8.91401C5.18382 9.10927 5.18382 9.42585 5.37908 9.62111C5.57434 9.81637 5.89092 9.81637 6.08619 9.62111L9.62172 6.08558Z' fill='%23ffffff' /%3E%3C/svg%3E%0A");
}

.prose .anchor:hover::after,
.prose .anchor:focus::after {
	opacity: 1;
}
/* #endregion */

.prose hr {
	@apply border-border my-12;
}

.prose hr:last-child {
	display: none;
}

/* #region link */
.prose a:not(.anchor) {
	@apply transition ease-in-out opacity-80 hover:opacity-100;
	position: relative;
	transition-duration: 0.25s;
	text-underline-offset: 4px;
}

/* external link */
.prose a.external-link {
	word-break: break-all;
}

/* TODO: 중복되는 CSS 코드 리팩터링 */
.prose a.external-link::after {
	content: '';
	display: inline-block;
	width: 1rem;
	height: 1rem;
	vertical-align: middle;
	background: no-repeat center center / 100% auto;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' fill='none'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M3.646 11.354a.5.5 0 0 1 0-.707L10.293 4H6a.5.5 0 0 1 0-1h5.5a.5.5 0 0 1 .5.5V9a.5.5 0 0 1-1 0V4.707l-6.646 6.647a.5.5 0 0 1-.708 0Z' clip-rule='evenodd'/%3E%3C/svg%3E");
}

.dark .prose a.external-link::after {
	background-image: url("data:image/svg+xml,%3Csvg width='15' height='15' viewBox='0 0 15 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z' fill='%23ffffff' /%3E%3C/svg%3E%0A");
}
/* #endregion */

/* mark */
.prose mark {
	@apply bg-sky-100 font-medium py-[3px] px-[5px] rounded-sm;
}

/* #region img */
.prose img {
	@apply my-0 mx-auto border rounded-md;
}

/* img caption */
.prose img + em {
	@apply block mt-1 text-center not-italic;
}
/* #endregion */


/* #region code block */
.prose pre {
	@apply border border-solid p-0;
}

.prose div[data-rehype-pretty-code-fragment] + div[data-rehype-pretty-code-fragment] {
	@apply mt-8
}

.prose div[data-rehype-pretty-code-title] {
	@apply text-sm mb-1 text-foreground;
}

.prose div[data-rehype-pretty-code-title] + .pre-wrapper {
	@apply overflow-hidden mt-0 border rounded-md;
}

.prose div[data-rehype-pretty-code-title] + .pre-wrapper pre {
	@apply my-0 rounded-none border-none;
	/* @apply my-0 border-t-0 rounded-tl-none rounded-tr-none; */
}

/* inline code block */
.prose code:not(pre code) {
	background: var(--code-block-inline-code-bg-color);
	font-family: inherit;
	@apply font-medium py-[3px] px-[5px] rounded-sm after:hidden before:hidden;
}

.prose pre code {
	@apply grid py-3;
	counter-reset: line;
}

.prose pre code > span {
	@apply px-3;
}

.prose pre code > span[data-highlighted-line] {
	background-color: var(--code-block-highlighted-line-bg-color);
}

/* #region line numbers */
.prose pre code[data-line-numbers] > [data-line] {
	@apply pl-0;
}

.prose pre code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
 
  /* Other styling */
  display: inline-block;
  width: 1rem;
  margin-right: 1.3rem;
  text-align: right;
  color: var(--code-block-line-number-color);
}
 
.prose pre code[data-line-numbers-max-digits='2'] > [data-line]::before {
  width: 2rem;
}
 
.prose pre code[data-line-numbers-max-digits='3'] > [data-line]::before {
  width: 3rem;
}
/* #endregion */
/* #endregion */

/* #region dark mode */
/* Fenced Code block - display change on theme switching*/
.light .prose .pre-wrapper[data-theme='dark'],
.dark .prose .pre-wrapper[data-theme='light'],
.light .prose pre[data-theme='dark'],
.dark .prose pre[data-theme='light'],
.light .prose div[data-rehype-pretty-code-title][data-theme='dark'],
.dark .prose div[data-rehype-pretty-code-title][data-theme='light'] {
  display: none;
}
/* #endregion */