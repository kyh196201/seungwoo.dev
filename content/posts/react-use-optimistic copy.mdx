---
title: "ë‚™ê´€ì  ì—…ë°ì´íŠ¸ì™€ React useOptimistic í›…"
description: ë‚™ê´€ì  ì—…ë°ì´íŠ¸ì™€ React 19ì— ìƒˆë¡­ê²Œ ì¶”ê°€ëœ useOptimistic í›…ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤.
date: 2025-01-31 23:30:00
toc: true
tags:
  - react
  - optimistic updates
---

í•­í•´ë¥¼ ë§ˆì¹œ í›„ ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤í„°ë””ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.<br />
í‰ì†Œ íšŒì‚¬ì—ì„œëŠ” vueë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë¦¬ì•¡íŠ¸ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê³  ì‹¶ì—ˆê³ , ì´ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ê¸° ìœ„í•´ì„œ ê³µì‹ë¬¸ì„œë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ë‚˜ì˜¨ ê¸°ìˆ ì— ëŒ€í•´ì„œ í•™ìŠµí•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.<br />
ì—¬ëŸ¬ í›…ì´ ìƒˆë¡œ ì¶”ê°€ëì§€ë§Œ ê·¸ ì¤‘ì—ì„œë„ `useOptimistic`ì— ëŒ€í•´ì„œ ìì„¸í•˜ê²Œ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.

## ë‚™ê´€ì  ì—…ë°ì´íŠ¸(Optimistic Updates)ë€?

> **ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ê°™ì´ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , UIë¥¼ ë¨¼ì € ê¸°ëŒ€ë˜ëŠ” ê²°ê³¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒ**ì„ ë§í•©ë‹ˆë‹¤.
ì‚¬ìš©ìëŠ” ë™ì‘ì— ëŒ€í•œ í”¼ë“œë°±ì„ ë¹¨ë¦¬ ë°›ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹ ë¥´ê²Œ ë™ì‘í•œë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‚™ê´€ì  ì—…ë°ì´íŠ¸ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. ì‚¬ìš©ì ì•¡ì…˜(ex ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­)
2. ë²„íŠ¼ í´ë¦­ê³¼ ë™ì‹œì— ì‚¬ìš©ìì˜ í™”ë©´ì„ ê¸°ëŒ€í•˜ëŠ” ê²°ê³¼ë¡œ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
3. ì„œë²„ì— ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë³´ëƒ„
4. ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì™„ë£Œë˜ë©´ ì„œë²„ì˜ ì‘ë‹µìœ¼ë¡œ í™”ë©´ì„ ì—…ë°ì´íŠ¸
5. ìš”ì²­ì´ ì‹¤íŒ¨í•  ê²½ìš° ì´ì „ ìƒíƒœë¡œ ë‹¤ì‹œ ëŒì•„ê°€ê±°ë‚˜ ì–¼ëŸ¿ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ìš”ì²­ì´ ì‹¤íŒ¨í–ˆë‹¤ëŠ” í”¼ë“œë°±ì„ ì œê³µ

---

## React19 useOptimistic í›…

ë¦¬ì•¡íŠ¸ 19 ë²„ì „ì—ì„œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” `useOptimistic` í›…ì´ ìƒˆë¡­ê²Œ ì¶”ê°€ëìŠµë‹ˆë‹¤.<br />
ê³µì‹ ë¬¸ì„œì—ì„œë„ `useOptimistic` í›…ì— ëŒ€í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.

> useOptimisticì€ React Hookìœ¼ë¡œ, ë¹„ë™ê¸° ì‘ì—…ì´ ì§„í–‰ ì¤‘ì¼ ë•Œ ë‹¤ë¥¸ ìƒíƒœë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

useOptimistic í›…ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ê°„ë‹¨í•œ ì¢‹ì•„ìš” ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>ì „ì²´ ì½”ë“œ ë³´ê¸°</b></summary>

```tsx
import { Heart } from "lucide-react";
import { useOptimistic, useTransition, useState, useEffect } from "react";

interface State {
	isLike: boolean
	count: number
}

export default function LikeButton() {
	const [state, setState] = useState<State>({ 
		isLike: false,
		count: 0
	})

	const [error, setError] = useState('')

	const [optimisticState, toggleOptimisticIsLike] = useOptimistic<State, State['isLike']>(state, (currentState, optimisticValue) => {
		return {
			isLike: optimisticValue,
			count: optimisticValue ? currentState.count + 1 : currentState.count - 1
		}
	})

	const [isPending, startTransition] = useTransition()

	useEffect(() => {
		const fetchData = async () => {
      const response = await fetch('/api/like', { method: 'GET' })
      const data = (await response.json()) as { isLike: boolean; count: number }
			setState(data)
    }

    fetchData();
	}, [])

	const addLike = async () => {
		try {
			const response = await fetch('/api/like', { method: 'POST' })
			if (!response.ok) {
				throw new Error('Server Error...')
			}
			const data = (await response.json()) as { isLike: boolean; count: number }
			setState(data)
		} catch (error) {
			if (error instanceof Error) {
				setError(error.message)
			}
		}
	}

	const removeLike = async () => {
		const response = await fetch('/api/like', { method: 'DELETE' })
		const data = (await response.json()) as { isLike: boolean; count: number }
		setState(data)
	}

	const handleClick = () => {
		startTransition(async () => {
			const nextIsLike = !optimisticState.isLike
			toggleOptimisticIsLike(nextIsLike)

			if (nextIsLike === true) {
				await addLike()
			} else {
				await removeLike()
			}
		})
	}

	const heartIcon = optimisticState.isLike ? <Heart color="#d04e4e" fill="#d04e4e" size={80} /> : <Heart color="#d04e4e" size={80} />

	return (
		<button type="button" className="flex flex-col gap-2 justify-center items-center" onClick={handleClick}>
			{heartIcon}
			<span className="text-4xl text-center text-slate-600 font-semibold">{optimisticState.count}</span>
			{isPending && <div className="text-2xl text-center text-slate-600">loading...</div>}
			{error && <div className="text-xl text-center text-red-600">{error}</div>}
		</button>
	)
}
```
</details>

---

### useOptimistic í›… ì„ ì–¸
```tsx
// LikeButton.tsx
function LikeButton() {
  const [optimisticState, toggleOptimisticIsLike] = useOptimistic<State, Value>(
  // state
  {
    isLike: false,
    count: 0
  },
  // updateFn
  (currentState: State, optimisticValue: Value): State => {
    return {
      isLike: optimisticValue,
      count: optimisticValue ? currentState.count + 1 : currentState.count - 1
    }
  })

  return <button></button>
}
```
`useOptimistic` í›…ì˜ ë§¤ê°œë³€ìˆ˜

- state
  - í›…ì˜ ì´ˆê¸° ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤.
  - ì´ë²ˆ ì˜ˆì œì—ì„œëŠ” í˜„ì¬ ì¢‹ì•„ìš” ìƒíƒœì™€ ì¢‹ì•„ìš” ê°œìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ê°ì²´ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- updateFn
  - `optimisticState`(ë‚™ê´€ì ì¸ ìƒíƒœ)ë¥¼ ê³„ì‚°í•˜ì—¬ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
  - ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” í˜„ì¬ ìƒíƒœ, ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” `toggleOptimisticIsLike` í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬ëœ ê°’ì…ë‹ˆë‹¤.
  - `toggleOptimisticIsLike` í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ê³„ì‚°í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.

`useOptimistic` í›…ì˜ ë¦¬í„´ ê°’

- optimisticState
  - ë¹„ë™ê¸° ì‘ì—…ì´ ì§„í–‰ ì¤‘ì¸ ë™ì•ˆì— ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë‚™ê´€ì ì¸ ìƒíƒœì…ë‹ˆë‹¤.
  - ë¹„ë™ê¸° ì‘ì—…ì´ ì§„í–‰ ì¤‘ì¼ ê²½ìš° `updateFn` í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ê°’ê³¼ ë™ì¼í•œ ê°’ì„ ê°€ì§‘ë‹ˆë‹¤.
  - ë¹„ë™ê¸° ì‘ì—…ì´ ì§„í–‰ ì¤‘ì´ì§€ ì•Šì„ ê²½ìš° ì´ˆê¸° `state`ì™€ ë™ì¼í•œ ê°’(stateê°€ ê°ì²´ì¼ ê²½ìš° ë™ì¼í•œ ì°¸ì¡°)ì„ ê°€ì§‘ë‹ˆë‹¤.
- toggleOptimisticIsLike
  - `toggleOptimisticIsLike` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `updateFn`ì´ í˜¸ì¶œë˜ì–´ `optimisticState`ê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
  - í˜¸ì¶œ ì‹œ ì „ë‹¬ ë°›ì€ ì¸ìê°€ `updateFn`ì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

---

### ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ êµ¬í˜„
```tsx
const handleClick = () => {
  startTransition(async () => {
    // ğŸ’¡ ë‚™ê´€ì  ì—…ë°ì´íŠ¸
    toggleOptimisticIsLike(!optimisticState.isLike)

    // API ìš”ì²­ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•´ 2ì´ˆì˜ ì§€ì—° ì„¤ì •
    await new Promise<void>((resolve) => {
      setTimeout(resolve, 2000)
    })
  })
}
```
- `startTransition` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `toggleOptimisticIsLike` í•¨ìˆ˜ì™€ apië¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- `toggleOptimisticIsLike`ê°€ í˜¸ì¶œë˜ë©´ `updateFn`ì´ ì‹¤í–‰ë˜ê³ , ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì‚¬ìš©ìì˜ í™”ë©´ì´ ë¨¼ì € ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.
- íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ì–´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveë˜ë©´, `optimisticState`ëŠ” ë‹¤ì‹œ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒì•„ê°‘ë‹ˆë‹¤.

```tsx title="updateFnì˜ ë™ì‘ ë°©ì‹"
// 1. ê¸°ì¡´ ìƒíƒœê°€ { isLike: false, count: 3 } ì¼ ë•Œ
toggleOptimisticIsLike(true)

const newState = updateFn({ isLike: false, count: 3 }, true)
// => { isLike: true, count: 4 } ë°˜í™˜

// 2. ê¸°ì¡´ ìƒíƒœê°€ { isLike: true, count: 4 } ì¼ ë•Œ
toggleOptimisticIsLike(false)

const newState = updateFn({ isLike: true, count: 4 }, false)
// => { isLike: false, count: 3 } ë°˜í™˜
```

-> ì‚¬ìš©ìì˜ í™”ë©´ì—ëŠ” ì•„ë˜ ì´ë¯¸ì§€ì²˜ëŸ¼ ë³´ì—¬ì§‘ë‹ˆë‹¤.

![](/posts/react-use-optimistic/example-1.gif)

ë‚™ê´€ì  ì—…ë°ì´íŠ¸ê°€ ì ìš©ëœ í›„ ë‹¤ì‹œ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒì•„ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
`useOptimistic`ì´ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©ë  ê²½ìš°, ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì´ˆê¸° `state` ê°’ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

---

#### âœ” `useOptimistic` í›…ì„ ì‚¬ìš©í•  ë•Œ `startTransition`ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 

`startTransition`ì˜ ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì•¡ì…˜ì´ë¼ê³  ë¶€ë¥´ëŠ”ë°, `useOptimistic`ì„ ì´ìš©í•´ì„œ ë‚™ê´€ì ì¸ ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ë ¤ë©´ `startTransition`ì´ë‚˜ React form action ì•ˆì—ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

-> ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
```text
An optimistic state update occurred outside a transition or action. 
To fix, move the update to an action, or wrap with startTransition.
```

#### âœ” `startTransition`ì„ ì‚¬ìš©í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•

```jsx
// 1. react íŒ¨í‚¤ì§€ì—ì„œ import
import { startTransition } from 'react'
```

```jsx
// 2. useTransition í›…ê³¼ í•¨ê»˜ ì‚¬ìš©
const [isPending, startTransition] = useTransition()
```
- ë¡œë”© ìƒíƒœë¥¼ ì¶”ê°€ë¡œ ê´€ë¦¬í•´ì•¼ í•  ê²½ìš° useTransition í›…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- `startTransition`ì˜ ì¸ìë¡œ ì „ë‹¬ëœ ì•¡ì…˜ì´ ì‹¤í–‰ ì¤‘ì¸ ë™ì•ˆ isPendingì€ true ê°’ì„ ìœ ì§€í•©ë‹ˆë‹¤.

---

### ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `useState` ì„ ì–¸

`optimisticState`ê°€ ë‹¤ì‹œ ì´ˆê¸° ê°’ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì„œë²„ì—ì„œ ë³€ê²½ëœ ìƒíƒœë¥¼ `useOptimistic`ì˜ ì´ˆê¸° ìƒíƒœì™€ ë™ê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤.<br />
ì´ë¥¼ ìœ„í•´ `useState`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , `useOptimistic`ì˜ ì´ˆê¸° ê°’ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

```tsx
const [state, setState] = useState<State>({
  isLike: false,
  count: 0
})

const [error, setError] = useState('')

// ë¡œë”© ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ useTransition í›… ì„ ì–¸
const [isPending, startTransition] = useTransition()

// useStateê°€ ë°˜í™˜í•œ stateë¥¼ useOptimistic í›…ì˜
// ì´ˆê¸° ê°’ìœ¼ë¡œ ì „ë‹¬
const [optimisticState, toggleOptimisticIsLike] = useOptimistic<State, Value>(
  state,
  updateFn
)

// ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í˜„ì¬ ì¢‹ì•„ìš” ìƒíƒœì™€ ê°œìˆ˜ë¥¼ ì¡°íšŒ
useEffect(() => {
  const fetchData = async () => {
    const response = await fetch('/api/like', { method: 'GET' })
    const data = (await response.json()) as { isLike: boolean; count: number }
    setState(data)
  }

  fetchData();
}, [])
```
- `useState`ê°€ ë°˜í™˜í•œ stateë¥¼ `useOptimistic`ì˜ ì´ˆê¸° ê°’ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
- `setState`ê°€ í˜¸ì¶œë˜ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œ ë§ˆë‹¤ `useOptimistic`ì´ ìƒˆë¡œìš´ ì´ˆê¸° ìƒíƒœì™€ í•¨ê»˜ í˜¸ì¶œë©ë‹ˆë‹¤.

---

### ì‹¤ì œ api ìš”ì²­ í•¨ìˆ˜ ì„ ì–¸

```tsx
const addLike = async () => {
  try {
    const response = await fetch('/api/like', { method: 'POST' })
    if (!response.ok) {
      throw new Error('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
    }
    
    const data = (await response.json()) as { isLike: boolean; count: number }
    setState(data)
  } catch (error) {
    if (error instanceof Error) {
      setError(error.message)
    }
  }
}

const removeLike = async () => {
  try {
    const response = await fetch('/api/like', { method: 'DELETE' })
    if (!response.ok) {
      throw new Error('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
    }
    
    const data = (await response.json()) as { isLike: boolean; count: number }
    setState(data)
  } catch (error) {
    if (error instanceof Error) {
      setError(error.message)
    }
  }
}

const handleClick = () => {
  startTransition(async () => {
    const nextIsLike = !optimisticState.isLike

    // ğŸ’¡ ë‚™ê´€ì  ì—…ë°ì´íŠ¸
    toggleOptimisticIsLike(nextIsLike)

    if (nextIsLike === true) {
      await addLike()
    } else {
      await removeLike()
    }
  })
}
```
- `handleClick` í•¨ìˆ˜ ë‚´ë¶€ì˜ ì•¡ì…˜ì—ì„œ ë‹¤ìŒ ì¢‹ì•„ìš” ìƒíƒœì— ë”°ë¼ì„œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ë¨¼ì € ì ìš©í•˜ê³ , `addLike`ì™€ `removeLike` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- api í˜¸ì¶œì— ì„±ê³µí–ˆì„ ê²½ìš°
	- api ì‘ë‹µì„ `setState`ë¡œ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ í˜¸ì¶œí•˜ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë©ë‹ˆë‹¤.
  - `useOptimistic`ì´ ìƒˆë¡œìš´ ì´ˆê¸° ìƒíƒœ(state)ì™€ í•¨ê»˜ í˜¸ì¶œë˜ì–´ ë‚™ê´€ì ì¸ ìƒíƒœê°€ ìœ ì§€ë©ë‹ˆë‹¤.
- api í˜¸ì¶œì— ì‹¤íŒ¨í–ˆì„ ê²½ìš°
  - `setError`ê°€ í˜¸ì¶œë˜ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.
  - `state`ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— `optimisticState`ê°€ ë‹¤ì‹œ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒì•„ê°‘ë‹ˆë‹¤.

---

### ì»´í¬ë„ŒíŠ¸ UI êµ¬í˜„

```tsx
const heartIcon = optimisticState.isLike ?
    <Heart color="#d04e4e" fill="#d04e4e" size={80} /> :
    <Heart color="#d04e4e" size={80} />

return (
  <button type="button" onClick={handleClick}>
    {heartIcon}
    <span>{optimisticState.count}</span>
    {isPending && <div className="text-slate-600">loading...</div>}
    {error && <div className="text-red-600">{error}</div>}
  </button>
)
```
- `optimisticState`ë¥¼ í™”ë©´ì— ë Œë”ë§í•©ë‹ˆë‹¤.
- `optimisticState.isLike`ì— ë”°ë¼ì„œ í•˜íŠ¸ ì•„ì´ì½˜ì´ ì „í™˜ë©ë‹ˆë‹¤.
- api ìš”ì²­ ì¤‘ì¸ ë™ì•ˆ "loadingâ€¦"	 í…ìŠ¤íŠ¸ê°€ í™”ë©´ì— ë…¸ì¶œë©ë‹ˆë‹¤.

---

### API ì‘ë‹µì— ë”°ë¥¸ UI ë³€í™”

![](/posts/react-use-optimistic/example-2.gif)*API ìš”ì²­ì— ì„±ê³µí–ˆì„ ê²½ìš°*

![](/posts/react-use-optimistic/example-3.gif)*API ìš”ì²­ì— ì‹¤íŒ¨í–ˆì„ ê²½ìš°*

---

## ìš”ì•½

- ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë€ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , ê¸°ëŒ€ë˜ëŠ” ê²°ê³¼ë¥¼ ë¨¼ì € ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
- React 19ì— ì¶”ê°€ëœ useOptimistic í›…ì€ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. í›… ë‚´ë¶€ì—ì„œ ì´ì „ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , api ìš”ì²­ì´ ì‹¤íŒ¨í•˜ë©´ ìë™ìœ¼ë¡œ ì´ì „ ìƒíƒœë¡œ ë³µì›ë˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ì ì¸ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- useOptimisticì€ React form action ë˜ëŠ” transitionê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

---

ì „ì²´ ì½”ë“œëŠ” [ì €ì¥ì†Œ](https://github.com/kyh196201/react-useOptimistic-example/blob/main/app/LikeButton.tsx)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ëª»ëœ ë‚´ìš©ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤! ğŸ™‚

---

## ì°¸ê³ 

- https://medium.com/@kyledeguzmanx/what-are-optimistic-updates-483662c3e171
- [https://velog.io/@kimkanu/React-í›…-useOptimistic](https://velog.io/@kimkanu/React-%ED%9B%85-useOptimistic)
- [https://velog.io/@jhjung3/Optimistic-Updates-êµ¬í˜„í•˜ê¸°-with-ë¦¬ì•¡íŠ¸-ì¿¼ë¦¬](https://velog.io/@jhjung3/Optimistic-Updates-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-with-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BF%BC%EB%A6%AC)